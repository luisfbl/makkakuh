<div class="participants-list">
    <div class="participants-header">
        <h3>Participantes ({{ totalElements }})</h3>

        <div class="search-container">
            <div class="search-input-wrapper">
                <input
                    type="text"
                    class="search-input"
                    placeholder="Buscar por nome..."
                    [(ngModel)]="searchTerm"
                    (input)="onSearch()"
                />

                <button
                    *ngIf="searchTerm"
                    class="clear-search-btn"
                    (click)="clearSearch()"
                    title="Limpar busca"
                >
                    Ã—
                </button>
            </div>
        </div>
    </div>

    <div class="loading-container" *ngIf="isLoading">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <span>Carregando participantes...</span>
        </div>
    </div>

    <div class="participants-container" *ngIf="!isLoading">
        <div class="empty-state" *ngIf="participants.length === 0">
            <div class="empty-icon">ðŸ‘¥</div>
            <p *ngIf="!searchTerm">Nenhum participante inscrito ainda.</p>
            <p *ngIf="searchTerm">Participante nÃ£o encontrado".</p>
        </div>

        <div class="participants-grid" *ngIf="participants.length > 0">
            <div
                class="participant-card"
                *ngFor="let participant of participants"
                [class.removable]="canEdit"
            >
                <div class="participant-info">
                    <img
                        [src]="getUserAvatar(participant)"
                        [alt]="getUserDisplayName(participant)"
                        class="participant-avatar"
                    />

                    <div class="participant-details">
                        <div class="participant-name">
                            {{ getUserDisplayName(participant) }}
                        </div>
                        <div class="participant-date">
                            Inscrito em
                            {{ participant?.date | date: "dd/MM/yyyy HH:mm" }}
                        </div>
                    </div>
                </div>

                <button
                    *ngIf="canEdit"
                    class="remove-participant-btn"
                    (click)="removeParticipant(participant)"
                    title="Remover participante"
                >
                    <span class="remove-icon">Ã—</span>
                </button>
            </div>
        </div>

        <div class="pagination-container" *ngIf="totalPages > 1">
            <div class="pagination">
                <button
                    class="pagination-btn"
                    [disabled]="!hasPrevious"
                    (click)="previousPage()"
                    title="PÃ¡gina anterior"
                >
                    â€¹
                </button>

                <button
                    *ngFor="let pageNum of pageNumbers"
                    class="pagination-btn"
                    [class.active]="pageNum === currentPage"
                    (click)="goToPage(pageNum)"
                >
                    {{ pageNum + 1 }}
                </button>

                <button
                    class="pagination-btn"
                    [disabled]="!hasNext"
                    (click)="nextPage()"
                    title="PrÃ³xima pÃ¡gina"
                >
                    â€º
                </button>
            </div>

            <div class="pagination-info">
                Mostrando {{ currentPage * pageSize + 1 }}-{{ getEndItem() }} de
                {{ totalElements }}
            </div>
        </div>
    </div>
</div>
