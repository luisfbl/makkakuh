<div class="participants-list">
    <div class="participants-header">
        <h3>Participantes ({{ totalElements }})</h3>
        <app-search-bar
            placeholder="Buscar por nome..."
            (searchChanged)="onSearchChanged($event)"
        ></app-search-bar>
    </div>

    <app-loading
        *ngIf="isLoading"
        type="spinner"
        size="large"
        text="Carregando participantes..."
        [showText]="true"
    ></app-loading>

    <div class="participants-container" *ngIf="!isLoading">
        <app-empty-state
            *ngIf="participants.length === 0"
            icon="ðŸ‘¥"
            message="Nenhum participante encontrado"
            description="NÃ£o hÃ¡ participantes inscritos neste evento."
        ></app-empty-state>

        <div class="participants-grid" *ngIf="participants.length > 0">
            <div
                class="participant-card"
                *ngFor="let participant of participants"
                [class.removable]="canEdit"
            >
                <div class="participant-info">
                    <img
                        [src]="getUserAvatar(participant)"
                        [alt]="getUserDisplayName(participant)"
                        class="participant-avatar"
                    />

                    <div class="participant-details">
                        <div class="participant-name">
                            {{ getUserDisplayName(participant) }}
                        </div>
                        <div class="participant-date">
                            Inscrito em
                            {{ participant?.date | date: "dd/MM/yyyy HH:mm" }}
                        </div>
                    </div>
                </div>

                <button
                    *ngIf="canEdit"
                    class="remove-participant-btn"
                    (click)="removeParticipant(participant)"
                    title="Remover participante"
                >
                    <span class="remove-icon">Ã—</span>
                </button>
            </div>
        </div>

        <app-pagination
            *ngIf="totalPages > 1"
            [currentPage]="currentPage"
            [totalPages]="totalPages"
            [totalItems]="totalElements"
            [pageSize]="pageSize"
            (pageChanged)="onPageChanged($event)"
        ></app-pagination>
    </div>
</div>
